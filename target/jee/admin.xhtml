<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:c="http://java.sun.com/jsp/jstl/core"
   template="/WEB-INF/templates/default.xhtml">
   <ui:define name="content">
     <c:if test='${logBean.login=="admin"}' >
     <div id="prawo">
     
     		 <div class="sidebar">
        	<h:form id="widokForm">
         		<h2>Widok:</h2>
         			<table>
            			<tr>
               				<td>
               				<h:selectOneRadio value="#{adminBean.widok}" >
  								<f:selectItems value="#{adminBean.widokList}" />
							</h:selectOneRadio>	
               				</td>
            			</tr>
            			
           			</table>
         			<p>
            			<h:commandButton id="widokButton" action="null" value="Pokaż"/>
            		</p>
      		</h:form> 
            </div>
            <div class="sidebar" >
   				<h2>Usuń użytkownika:</h2>
              	<h:form id="usunU" rendered="#{!empty adminBean.wszystkieLoginy}">
      				<table>
            			<tr>
               				<th style="text-align: right;">
                  				<h:outputLabel for="login" value="Login:"/>
               				</th>
               				<td>
                    			
 								<h:selectOneMenu id="login" required="true" value="#{adminBean.userLogin}">
									<f:selectItems value="#{adminBean.wszystkieLoginy}"  />
 								</h:selectOneMenu>
 								<!-- h:selectManyMenu id="idList" required="true" value="#{adminBean.idList}">
									<f:selectItems value="#{adminBean.wszystkieId}"  />
 								</h:selectManyMenu-->
 								
               				</td>
            			</tr>
           			</table>
         			<p>
           				<h:commandButton id="usunU" action="#{adminBean.wykonajUsuwanieU}" value="Usuń" />
            		</p>
      			</h:form>
      			<h:outputText value="Nic do usuwania." rendered="#{empty adminBean.wszystkieLoginy}" />
      		</div>
   			<div class="sidebar" >
   				<h2>Usuń notatkę:</h2>
              	<h:form id="usun" rendered="#{!empty adminBean.wszystkieId}">
      				<table>
            			<tr>
               				<th style="text-align: right;">
                  				<h:outputLabel for="id" value="Id:"/>
               				</th>
               				<td>
                    			
 								<h:selectOneMenu id="id" required="true" value="#{adminBean.id}">
									<f:selectItems value="#{adminBean.wszystkieId}"  />
 								</h:selectOneMenu>
 								<!-- h:selectManyMenu id="idList" required="true" value="#{adminBean.idList}">
									<f:selectItems value="#{adminBean.wszystkieId}"  />
 								</h:selectManyMenu-->
 								
               				</td>
            			</tr>
           			</table>
         			<p>
           				<h:commandButton id="usun" action="#{adminBean.wykonajUsuwanie}" value="Usuń" />
            		</p>
      			</h:form>
      			<h:outputText value="Nic do usuwania." rendered="#{empty adminBean.wszystkieId}" />
      		</div>
      		
      		<div class="sidebar" >
   				<h2>Statystyki:</h2>
      				<table>
            			<tr>
               				<th style="text-align: right;">
                  				Notatki:
               				</th>
               				<td>
                  				<h:outputText  value="#{adminBean.sumaNotatek}" />	
               				</td>
            			</tr>
            			<tr>
               				<th style="text-align: right;">
               					Użytkownicy:
               				</th>
               				<td>
                  				<h:outputText  value="#{adminBean.sumaUserow-1}" />
               				</td>
           				 </tr>
           			</table>
      			</div>		
      </div>
      
      <div id="lewo">
      
      
    Witaj, <h:outputText value="#{logBean.imie}"  style="font-weight:bold;"/> <h:form><h:commandLink action="#{logBean.wyloguj}" ><h:outputText value="Wyloguj się"/></h:commandLink></h:form>
    <br/>
<c:if test='${adminBean.widok.equals("notatki")}'>
<h2>Notatki </h2>
      <h:dataTable var="currentUser" value="#{adminBean.wszyscyUser}" rendered="#{!empty adminBean.wszyscyUser}" >
        
         <h:column>
            <f:facet name="header">Użytkownik</f:facet>
             #{currentUser.login}
         </h:column>
         <h:column>
            <h:dataTable var="currentNotatka" value="#{currentUser.notatki}" rendered="#{!empty currentUser.notatki}" >
      			<h:column>
      				<f:facet name="header">Id</f:facet>
            		<h:outputText value="#{currentNotatka.id}" />
            	</h:column>
      			<h:column>
            		<f:facet name="header">Data</f:facet>
            
            		<h:outputText value="#{currentNotatka.data}" >
            		<f:convertDateTime type="date" />
            		</h:outputText>
            	</h:column>
            	<h:column>
            	<f:facet name="header">Treśc</f:facet>
            		<h:outputText value="#{currentNotatka.tresc}" />
            	</h:column>
            </h:dataTable>		
         </h:column>
        
         
      </h:dataTable>
</c:if>
<c:if test='${adminBean.widok.equals("użytkownicy")}'>    
	<h2>Użytkownicy </h2>
      <h:dataTable var="user" value="#{adminBean.wszyscyUser}" rendered="#{!empty adminBean.wszyscyUser}" >
         <h:column>
           
         </h:column>
         <h:column>
            <f:facet name="header">Login</f:facet>
             #{user.login}
         </h:column>
         <h:column>
            <f:facet name="header">Imię</f:facet>
            <h:outputText value="#{user.imie}" />
         </h:column>
         <!--h:column>
            <f:facet name="header">Suma notatek</f:facet>
           #{user.login}
         </h:column-->
         
      </h:dataTable>
</c:if>
   
      </div>
      
      </c:if>
      <c:if test='${logBean.login!="admin"}' >
      	<br/>
      	<h:outputLink value="first.jsf">Zaloguj się</h:outputLink>, aby oglądać tą stronę 
      	<br/>
      </c:if>
   </ui:define>
</ui:composition>
