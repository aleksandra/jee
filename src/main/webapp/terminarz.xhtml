<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:c="http://java.sun.com/jsp/jstl/core"
   template="/WEB-INF/templates/default.xhtml">
   <ui:define name="content">
     <c:if test="${logBean.login!=null}" >
     <div id="prawo">
     
     
     <div class="sidebar">
        	<h:form id="widokForm">
         		<h2>Widok:</h2>
         			<table>
            			<tr>
               				<td>
               				<h:selectOneRadio value="#{notatkaBean.widok}" >
  								<f:selectItems value="#{notatkaBean.widokList}" />
							</h:selectOneRadio>	
               				</td>
            			</tr>
            			
           			</table>
         			<p>
            			<h:commandButton id="widokButton" action="null" value="Pokaż"/>
            		</p>
      		</h:form> 
            </div>
     
     
     	<div class="sidebar">
        	<h:form id="bv">
         		<h2>Dodaj notatkę:</h2>
         			<table>
            			<tr>
               				<th style="text-align: right;">
                  				<h:outputLabel for="data" value="Data:"/>
               				</th>
               				<td>
                  				<h:inputText id="data" styleClass="data" value="#{notatkaBean.data}" >
            						<f:convertDateTime type="date" pattern="yyyy-MM-dd" />
            					</h:inputText>	
                				<h:message for="data" errorClass="invalid"/>
               				</td>
            			</tr>
            			<tr>
               				<th style="text-align: right;">
                  				<h:outputLabel for="tresc" value="Notatka:"/>
               				</th>
               				<td>
                  				<h:inputTextarea id="tresc" value="#{notatkaBean.tresc}" />
                  				<h:message for="tresc" errorClass="invalid"/>
               				</td>
           				 </tr>
           			</table>
         			<p>
            			<h:commandButton id="check" action="#{notatkaBean.wykonajDodawanie}" value="Notuj"/>
            			</p>
      		</h:form> 
            </div>
     
   			<div class="sidebar" >
   				<h2>Usuń notatkę:</h2>
              	<h:form id="usun" rendered="#{!empty notatkaBean.wszystkieId}">
      				<table>
            			<tr>
               				<th style="text-align: right;">
                  				<h:outputLabel for="id" value="Id:"/>
               				</th>
               				<td>
                    			
 								<h:selectOneMenu id="id" required="true" value="#{notatkaBean.id}">
									<f:selectItems value="#{notatkaBean.wszystkieId}"  />
 								</h:selectOneMenu>
 								
               				</td>
            			</tr>
           			</table>
         			<p>
           				<h:commandButton id="usun" action="#{notatkaBean.wykonajUsuwanie}" value="Usuń" />
            				</p>
      			</h:form>
      			<h:outputText value="Dodaj notatki, żeby móc sobie pousuwac" rendered="#{empty notatkaBean.wszystkieId}" />
      		</div>
      		
      		<div class="sidebar" >
   				<h2>Statystyki:</h2>
              	
      				<table>
            			<tr>
               				<th style="text-align: right;">
                  				W archiwum:
               				</th>
               				<td>
                  				<h:outputText  value="#{notatkaBean.sumaArch}" />	
               				</td>
            			</tr>
            			<tr>
               				<th style="text-align: right;">
               					Aktualne:
               				</th>
               				<td>
                  				<h:outputText  value="#{notatkaBean.sumaTerm}" />
               				</td>
           				 </tr>
           				 
           				 <hr />
           				 <tr>
               				<th style="text-align: right;">
               					Razem:
               				</th>
               				<td>
                  				<h:outputText  value="#{notatkaBean.suma}" />   <h:outputText value="Zaktualizowano" rendered="#{facesContext.postback and empty facesContex.messageList}" style="color: green;"/>
         		
               				</td>
           				 </tr>
           			</table>
      			</div>		
      </div>
      
      <div id="lewo">
      
      
    Witaj, <h:outputText value="#{logBean.imie}"  style="font-weight:bold;"/> <h:form><h:commandLink action="#{logBean.wyloguj}" ><h:outputText value="Wyloguj się"/></h:commandLink></h:form>
    <br/>
<c:if test='${notatkaBean.widok.equals("aktualne")}'>
<h2>Notatki </h2>
      <h:dataTable var="notatka" value="#{notatkaBean.wszystkieNotatkiPrzyszle}" rendered="#{!empty notatkaBean.wszystkieNotatkiPrzyszle}" columnClasses="kolumna1, kolumna2, kolumna3, kolumna4">
         <h:column>
            
            <h:graphicImage value="/resources/gfx/wykrzyknik.jpg" alt="wykrzyknik" rendered="#{notatkaBean.dzis.after(notatka.data)}"/>

         </h:column>
         <h:column>
            <f:facet name="header">Id</f:facet>
             #{notatka.id}
         </h:column>
         <h:column>
            <f:facet name="header">Data</f:facet>
            
            <h:outputText value="#{notatka.data}" >
            <f:convertDateTime type="date" />
            </h:outputText>
         </h:column>
         <h:column>
            <f:facet name="header">Notatka</f:facet>
            #{notatka.tresc}
         </h:column>
         
      </h:dataTable>
    </c:if>
    <c:if test='${notatkaBean.widok.equals("archiwum")}'>
    	<h2>Archiwum </h2>
      <h:dataTable var="notatka" value="#{notatkaBean.wszystkieNotatkiPrzeszle}" rendered="#{!empty notatkaBean.wszystkieNotatkiPrzeszle}" columnClasses="kolumna2, kolumna3, kolumna4" >
         <h:column>
            <f:facet name="header">Id</f:facet>
             #{notatka.id}
         </h:column>
         <h:column>
            <f:facet name="header">Data</f:facet>
            
            <h:outputText value="#{notatka.data}" >
            <f:convertDateTime type="date" />
            </h:outputText>
         </h:column>
         <h:column>
            <f:facet name="header">Notatka</f:facet>
            #{notatka.tresc}
         </h:column>
      </h:dataTable>
    </c:if>
      
      </div>
      
      </c:if>
      <c:if test="${logBean.login==null}" >
      	<br/>
      	<h:outputLink value="first.jsf">Zaloguj się</h:outputLink>, aby oglądać tą stronę 
      	<br/>
      </c:if>
   </ui:define>
</ui:composition>
